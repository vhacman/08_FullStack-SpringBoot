<div class="booking-card">
  <div class="booking-grid">

    <!-- COLONNA 1: Dati ospite -->
    <div class="col-guest">
      <div class="guest-name">
        <img src="img/clienteIcon.png" alt="ospite" class="guest-icon">
        {{ booking().guest.firstName }} {{ booking().guest.lastName }}
      </div>
      <div class="guest-detail" (click)="toggleSsn()" style="cursor:pointer">
        <i class="fa fa-id-card-o"></i>
        @if (ssnVisible()) {
          {{ booking().guest.ssn }}
        } @else {
          Codice Fiscale
        }
      </div>
      <div class="guest-detail" (click)="toggleAddress()" style="cursor:pointer">
        <i class="fa fa-map-marker"></i>
        @if (addressVisible()) {
          {{ booking().guest.address }}, {{ booking().guest.city }}
        } @else {
          Indirizzo
        }
      </div>
    </div>

    <!-- COLONNA 2: Info prenotazione -->
    <div class="col-booking">
      <div class="info-row">
        <span class="info-label"><i class="fa fa-bed"></i> Camera</span>
        <span class="info-value">{{ booking().room.name }}</span>
      </div>
      <div class="info-row">
        <span class="info-label"><i class="fa fa-sign-in"></i> Check-in</span>
        <span class="info-value">{{ booking().checkIn | date:'dd/MM/yy' }}</span>
      </div>
      <div class="info-row">
        <span class="info-label"><i class="fa fa-sign-out"></i> Check-out</span>
        <span class="info-value">{{ booking().checkOut | date:'dd/MM/yy' }}</span>
      </div>
    </div>

    <!-- COLONNA 3: Azioni -->
    <div class="col-actions">
      @if (booking().status === 'SCHEDULED') {
        <div class="action-item">
          <button class="btn-icon" (click)="doCheckIn()" title="Check-in">
            <img src="img/checkInIcona.png" alt="Check-in">
          </button>
          <span class="action-label">Check in</span>
        </div>
      }
      @if (booking().status === 'EXECUTED') {
        @if (isFuture(booking().checkOut)) {
          <div class="action-item">
            <img src="img/checkedInIcona.png" alt="Checked in" class="status-icon">
            <span class="action-label done">Checked in</span>
          </div>
        }
        @if (booking().cleaned) {
          <div class="action-item">
            <img src="img/cleanedIcona.png" alt="Camera pulita" class="status-icon">
            <span class="action-label done">Disponibile</span>
          </div>
        } @else {
          @if (isToday(booking().checkOut)) {
            <div class="action-item">
              <button class="btn-icon" (click)="setCleaned()" title="Pulizie eseguite">
                <img src="img/toCleanIcon.png" alt="Esegui pulizie">
              </button>
              <span class="action-label warn">Da pulire</span>
            </div>
          }
          @if (isPast(booking().checkOut)) {
            <div class="action-item">
              <img src="img/toCleanIcon.png" alt="Da pulire" class="status-icon">
              <span class="action-label warn">Da pulire</span>
            </div>
          }
        }
      }
    </div>

  </div>
</div>
