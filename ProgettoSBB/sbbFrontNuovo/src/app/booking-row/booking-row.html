<div class="booking-card">
  <div class="booking-grid">
    <!-- COLONNA 1: Avatar -->
    <div class="col-avatar">
      <div class="avatar">
        {{ booking().guest.firstName.charAt(0) }}{{ booking().guest.lastName.charAt(0) }}
      </div>
    </div>
    <!-- COLONNA 2: Dati ospite -->
    <div class="col-guest">
      <div class="guest-name">{{ booking().guest.firstName }} {{ booking().guest.lastName }}</div>
      <div class="guest-detail">
        <i class="fa fa-id-card-o"></i> {{ booking().guest.ssn }}
      </div>
      <div class="guest-detail">
        <i class="fa fa-map-marker"></i> {{ booking().guest.city }}
      </div>
    </div>
    <!-- COLONNA 3: Camera, date, azione -->
    <div class="col-booking">
      <div class="booking-info">
        <div class="room-name">
          <i class="fa fa-bed"></i> {{ booking().room.name }}
        </div>
        <div class="booking-dates">
          <span><i class="fa fa-sign-in"></i> {{ booking().from | date:'dd/MM/yy' }}</span>
          <span class="date-arrow">→</span>
          <span><i class="fa fa-sign-out"></i> {{ booking().to | date:'dd/MM/yy' }}</span>
        </div>
      </div>
      <div class="action-area">
        <!-- CASO 1: prenotazione confermata, ospite non ancora arrivato → mostro icona check-in -->
        @if (booking().status === 'SCHEDULED') {
          <button class="btn-icon-checkin" (click)="doCheckIn()" title="Check-in">
            <img src="img/checkInIcona.png" alt="Check-in">
          </button>
        }
        <!-- CASO 2: check-in effettuato (EXECUTED) -->
        @if (booking().status === 'EXECUTED') {
          @if (isFuture(booking().to)) {
            <img src="img/checkedInIcona.png" alt="Check-in effettuato" class="icon-checkedin">
          }
          @if (isToday(booking().to) || isPast(booking().to)) {
            <img src="img/checkedInIcona.png" alt="Check-in effettuato" class="icon-checkedin">
          }
          <!-- Se cleaned è true → MOSTRO SEMPRE "Camera pulita" -->
          @if (booking().cleaned) {
            <span class="status-clean"><i class="fa fa-check-circle"></i> Camera pulita</span>
          }
          @else {
            @if (isToday(booking().to)) {
              <button class="btn-clean" (click)="setCleaned()">
                <i class="fa fa-shower"></i> Pulizie eseguite
              </button>
            }
            @if (isPast(booking().to)) {
              <span class="status-dirty"><i class="fa fa-exclamation-circle"></i> Da pulire</span>
            }
          }
        }
      </div>
    </div>
  </div>
</div>
