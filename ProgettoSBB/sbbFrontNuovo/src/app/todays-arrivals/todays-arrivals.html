<div class="w3-container" style="padding: 0 8px 8px; margin-top: 16px;">

  <div class="arrivals-header-box">
    <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 8px;">
      <h2 class="page-title" style="margin: 0;">Arrivi di Oggi</h2>
      <button class="refresh-btn" (click)="refresh()" title="Aggiorna">
        <i class="bi bi-arrow-clockwise"></i>
      </button>
    </div>
  </div>

  <!-- Stato vuoto -->
  @if (bookings().length === 0 && checkedInBookings().length === 0) {
    <div class="w3-panel w3-leftbar w3-padding-16 empty-state">
      <p>Nessun arrivo previsto per oggi.</p>
    </div>
  }

  <!-- Lista Arrivi in attesa di check-in -->
  @if (bookings().length > 0) {
    <div class="bookings-list">
      @for (booking of bookings(); track booking.id) {
        <app-booking-row [booking]="booking" (checkInDone)="onCheckInDone($event)"></app-booking-row>
      }
    </div>
  }

</div>

<!-- Sezione Checked In separata -->
@if (checkedInBookings().length > 0) {
  <div class="checked-in-section" style="padding: 0 8px 8px; margin-top: 16px;">
    <div class="collapsible-section">

      <div class="collapsible-header green" (click)="toggleCheckedIn()">
        <span>Checked In</span>
        <span class="count-badge green-badge">{{ checkedInBookings().length }}</span>
        <span class="chevron">@if (checkedInExpanded()) { ▲ } @else { ▼ }</span>
      </div>

      @if (checkedInExpanded()) {
        <div class="expanded-list">
          @for (b of checkedInBookings(); track b.id) {
            <app-booking-row [booking]="b"></app-booking-row>
          }
        </div>
      }

    </div>
  </div>
}
